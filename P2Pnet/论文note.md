### 论文总结：重新思考人群中的计数与定位：一种纯粹基于点的框架

## 1. **传统方法的问题**

#### **1.1 密度图方法**

**问题**：这种方法只能告诉你大概有多少人，但没法告诉你具体每个人的位置。比如你知道有 100 人，但不知道他们具体站在哪。

**论文中强调了：密度图的最大缺点就是无法预测人的精确位置。**

#### **1.2 检测方法**：用框框标记每个人的头部。

**论文中强调检测方法的缺点为**：然而，考虑到仅提供点注释，这些方法依赖启发式估算真实的边界框，这种方法容易出错，甚至不可行

#### 1.3 评估指标

**论文中也提出了传统的评估指标的缺点：**

>**传统普遍认同的评估指标（MAE 和 MSE）：**
>缺点：仅衡量计数误差，完全忽略单张图像中估计误差的显著空间变化。
>
>- MAE：预测人数和真实人数的平均差值。
>  - **公式**：$ MAE = \frac{1}{N} \sum_{i=1}^N |P_i - G_i| $
>- MSE：预测误差的平方均值，**放大大误差的影响**
>  - **公式**：$ MSE = \sqrt{\frac{1}{N} \sum_{i=1}^N (P_i - G_i)^2} $
>
>**使用基于块（patch-level）或像素级的绝对计数误差：**
>缺点：仅提供粗糙的定位评估
>
>**现有的定位相关指标**：
>
>缺点：要么忽略人群中显著的密度变化，要么缺乏对重复预测的惩罚

**补充，nAP指标相对于上面传统指标的优点**

>#### 新指标 nAP 的改进
>
>密度归一化平均精度（nAP），解决了上述问题：
>
>- 综合评估定位和计数：既看预测点的位置准不准，也看人数对不对。
>- 引入密度归一化：根据人群密度调整匹配规则，人多的地方要求更小的误差，人少的地方允许更大误差。
>- 使用序列匹配：避免重复预测（一个真实点只匹配一个预测点）。



## 2. **论文的创新：P2PNet 方法**

**论文强调P2PNet目标是：预测的点与真实点的距离尽可能近，置信度分数尽可能高。副产品是，预测的人数与真实的人数也尽可能接近。**

核心思想是：**直接预测点（把预测位置和预测数目同时进行）**

#### 2.1 具体步骤

##### 步骤 1：点提案生成

**详细描述**：

点提案生成的目标是为输入图像生成一组初始的候选点（点提案），这些点覆盖整个图像，作为后续预测的起点。P2PNet采用基于网格的策略，确保点提案均匀分布且计算高效。论文提供了两种参考点布局：Grid布局（每个网格单元内均匀分布的点）和Center布局（点位于网格单元中心），实验表明Grid布局略优（PAGE8，Table 4），因此主要使用Grid布局。

- 输入：
  - 一张彩色人群图像 $   I \in \mathbb{R}^{H \times W \times 3}   $，其中 $   H   $ 是高度，$   W   $ 是宽度，3表示RGB三通道。例如，输入图像可以是 $   1024 \times 768 \times 3   $。
- **网格划分：**
  - 将图像划分为规则的网格，网格步幅为 $   S = 8   $（PAGE6，Section 4.1），即每8像素一个网格单元。网格单元的数量为： $H' = \frac{H}{S}, \quad W' = \frac{W}{S}$ 例如，对于 $   1024 \times 768   $ 的图像，网格尺寸为 $   \frac{1024}{8} \times \frac{768}{8} = 128 \times 96   $。
- **参考点生成：**
  - 在每个网格单元内，预定义$K = 4$个参考点（PAGE6，Section 4.1；UCF-QNRF数据集使用 ）。参考点的初始位置根据布局确定：
    - **Grid布局**：点均匀分布在网格单元内，例如位于四个象限的中心，形成密集排列（PAGE5，Figure 4）。
    - **Center布局**：点位于网格单元的中心，较为稀疏（PAGE5，Figure 4）。
  - 论文实验主要使用Grid布局，因其在密集区域表现略优（PAGE8，Table 4）。每个参考点的坐标 $   p_i = (x_i, y_i)   $ 基于网格单元中心坐标和预定义偏移计算。
  - 总点提案数为： $N = H' \times W' \times K$ 例如，$   128 \times 96 \times 4 = 49,152   $ 个点提案。
- 输出：
  - 一组点提案 $   P = \{p_i \mid i=1,2,...,N\}   $，其中每个 $   p_i = (x_i, y_i)   $ 是图像平面上的二维坐标。点提案以一维序列形式存储，形状为 $   [N, 2]   $（例如，$   [49,152, 2]   $），表示 $   N   $ 个点的 $   x   $ 和 $   y   $ 坐标。

##### 步骤 2：特征提取与点预测

- 输入：

  - 彩色人群图像 $   I \in \mathbb{R}^{H \times W \times 3}   $（例如，$   1024 \times 768 \times 3   $）。
  - 点提案 $   P = \{p_i \mid i=1,2,...,N\}   $，来自步骤 1（例如，$   49,152   $ 个点）。

- 特征提取：

  - 使用VGG-16前13层（包括卷积和池化层）作为主干网络，提取初始特征图，分辨率为 $   H/16 \times W/16   $（PAGE5，Section 3.4；PAGE6，Figure 5）。

  - 上采样和横向连接：

    - 将 $   H/16 \times W/16   $ 特征图通过最近邻插值上采样2倍，得到 $   H/8 \times W/8   $ 分辨率。

    - 从VGG-16第四块卷积层（conv4）提取特征图，通过1×1卷积降低通道数（减少维度），形成横向连接（lateral connection）。

    - 将上采样后的特征图与横向连接的特征图逐元素相加（element-wise addition），融合多尺度信息。

    - 融合后的特征图通过一个3×3卷积层处理，生成最终特征图 
      $$
      \mathcal{F}_s \in \mathbb{R}^{H' \times W' \times C}
      $$
      ，其中：

      - $   H' = \frac{H}{S}   $，$   W' = \frac{W}{S}   $，$   S = 8   $（例如，$   128 \times 96   $）。
      - $   C   $ 是特征通道数（例如，512）。

    - 3×3卷积用于减少上采样带来的混叠效应（aliasing effect）（PAGE6）。

  - 特征图 $   \mathcal{F}_s   $ 捕获人群的局部和全局模式（如人头纹理、密度分布），适用于不同尺度和密度的场景。

  **回归分支和分类分支都是基于特征图来做的**

- 回归分支：

  - 回归分支基于**特征图 $   \mathcal{F}_s   $**，通过一个预测头预测每个点提案的偏移量 $   (\Delta_{jx}^k, \Delta_{jy}^k)   $。预测头由三层卷积（带ReLU激活）组成（PAGE6）。

  - 对于每个网格单元的 $   K   $ 个参考点，输出 $   2 \times K   $ 个通道（每个点预测 $   x   $ 和 $   y   $ 偏移量）。卷积头输出形状为 $   H' \times W' \times (2 \times K)   $（例如，$   128 \times 96 \times 8   $，若 $   K = 4   $）。

  - 预测点坐标计算公式（PAGE5，公式2）：
    $$
    \hat{x}_j = x_k + \gamma \Delta_{jx}^k, \quad \hat{y}_j = y_k + \gamma \Delta_{jy}^k
    $$
    其中：

    - $   (x_k, y_k)   $ 是参考点 $   p_i   $ 的初始坐标。
    - $   \gamma = 100   $（PAGE6，Section 4.1），用于缩放卷积输出的偏移量，确保回归量级适配图像坐标。
    - $   \hat{p}_j = (\hat{x}_j, \hat{y}_j)   $ 是调整后的预测点坐标。

- 分类分支：

  - 分类分支**基于相同的特征图 $**   \mathcal{F}_s   $，通过另一个预测头预测每个点提案的置信度 $   \hat{c}_j \in [0,1]   $，表示该点对应真实个体的概率。预测头同样由三层卷积（带ReLU激活）组成（PAGE6）。
  - 输出形状为 $   H' \times W' \times K   $（例如，$   128 \times 96 \times 4   $，若 $   K = 4   $），每个值表示对应点的置信度。
  - 置信度通过Softmax归一化生成（PAGE5，Section 3.4），对正样本（真实个体）和负样本（背景）进行二分类。论文中的“Softmax normalization”等价于对两个logit（正/负）进行Softmax，实际实现中可使用Sigmoid+二分类交叉熵损失（PAGE5，损失函数）。

- 输出：

  - **预测点**：调整后的点坐标 $   \{\hat{p}_j \mid j=1,2,...,N\}   $，形状为 $   [N, 2]   $（例如，$   [49,152, 2]   $）。
  - **置信度**：每个点的置信度 $   \{\hat{c}_j \mid j=1,2,...,N\}   $，形状为 $   [N, 1]   $（例如，$   [49,152, 1]   $）。

**输出示例**（继续假设输入图像为 $   1024 \times 768   $，$   S=8   $，$   K=4   $，Grid布局）：

- 特征图：$   \mathcal{F}_s \in \mathbb{R}^{128 \times 96 \times 512}   $（假设VGG-16主干）。
- 回归分支输出：偏移量特征图 $   \in \mathbb{R}^{128 \times 96 \times 8}   $，转换为预测点 $   \hat{P} \in \mathbb{R}^{49,152 \times 2}   $，使用 $   \hat{p}_j = (x_k + \gamma \Delta_{jx}^k, y_k + \gamma \Delta_{jy}^k)   $，$  \gamma = 100  $。
- 分类分支输出：置信度特征图 $   \in \mathbb{R}^{128 \times 96 \times 4}   $，转换为置信度 $   \hat{C} \in \mathbb{R}^{49,152 \times 1}   $，通过Softmax归一化。

##### 步骤 3：一对一匹配

- **输入：**

  - **预测点**：$   \{\hat{p}_j \mid j \in \{1, \dots, M\}\}   $，来自步骤 2，表示 $   M   $ 个调整后的点提案坐标（例如，$   M = 49,152   $）。
  - **置信度**：$   \{\hat{c}_j \mid j \in \{1, \dots, M\}\}   $，来自步骤 2，表示每个预测点的置信度评分。
  - **真实点**：地面真相点 $   \{p_i \mid i \in \{1, \dots, N\}\}   $，其中 $   N   $ 是图像中真实个体的数量（例如，$   N = 100   $ 表示100个人）。每个 $   p_i = (x_i, y_i)   $ 表示一个人头中心坐标。
  - 确保 $   M > N   $，以生成足够的预测点，多余点将自动归为负样本（PAGE5）。

- **匹配成本：**

  - 定义匹配成本矩阵 

    
    $$
    D \in \mathbb{R}^{N \times M}
    $$
    其中元素 $D_{ij} $表示真实点 $ p_i$ 与预测点 $\hat{p}_j  $的匹配成本（PAGE5，Section 3.4）：
    $$
    D_{ij} = \tau \|\hat{p}_j - p_i\|_2 - \hat{c}_j
    $$
    其中：

    - $   \|\hat{p}_j - p_i\|_2 = \sqrt{(\hat{x}_j - x_i)^2 + (\hat{y}_j - y_i)^2}   $，表示欧氏距离，衡量预测点与真实点的空间偏差。
    - $   -\hat{c}_j   $，置信度项，鼓励高置信度的预测点匹配真实点（负号表示高置信度降低成本）。
    - $   \tau = 5 \times 10^{-2} = 0.05   $（PAGE6，Section 4.1），为距离项的缩放系数，平衡距离和置信度的贡献。

- **匈牙利算法：**

  - 使用匈牙利算法（PAGE5，引用[16, 34, 42]）**基于成本矩阵 $   D   $** 求解最优匹配，得到一个映射 $   \xi: \{1, \dots, N\} \to \{1, \dots, M\}   $，表示每个真实点 $   p_i   $ 匹配的预测点 $   \hat{p}_{\xi(i)}   $。
  - 匹配结果确保：
    - 每个真实点 $   p_i   $ 至多匹配一个预测点 $   \hat{p}_{\xi(i)}   $。
    - 每个预测点 $   \hat{p}_j   $ 至多匹配一个真实点。
  - 匹配后的预测点分为：
    - **正样本**：匹配的预测点集合 $   \hat{\mathcal{P}}_{\text{pos}} = \{\hat{p}_{\xi(i)} \mid i \in \{1, \dots, N\}\}   $，目标置信度为1。
    - **负样本**：未匹配的预测点集合 $   \hat{\mathcal{P}}_{\text{neg}} = \{\hat{p}_j \mid j \in \{1, \dots, M\} \setminus \{\xi(1), \dots, \xi(N)\}\}   $，目标置信度为0。
  - 由于 $   M > N   $，多余的预测点自动归为负样本，无需额外的距离阈值（PAGE5）。

- **输出：**

  - 匹配映射 $   \xi: \{1, \dots, N\} \to \{1, \dots, M\}   $，表示真实点 $   p_i   $ 与预测点 $   \hat{p}_{\xi(i)}   $ 的对应关系。
  - 正样本集合：$   \hat{\mathcal{P}}_{\text{pos}} = \{\hat{p}_{\xi(i)} \mid i \in \{1, \dots, N\}\}   $，目标置信度为1。
  - 负样本集合：$   \hat{\mathcal{P}}_{\text{neg}} = \{\hat{p}_j \mid j \notin \{\xi(1), \dots, \xi(N)\}\}   $，目标置信度为0。

##### 步骤 4：损失函数优化

**对匹配的预测点做回归损失，对所有的点做分类损失**

>因为只有跟某个真实点一一匹配上的提议（正样本）才有“坐标监督信号”，才能告诉网络“这个点应该往哪里移动”，所以 **回归损失** 只加在那 $N$ 个正样本上。而所有 $M$ 个提议，都要学会“这是人头”还是“背景”，才能让网络在推理时区分正负，所以 **分类损失** 要对**全部**预测点都施加。

- **输入：**

  - **预测点**：$\{\hat p_j\}_{j=1}^M$，来自步骤 2，表示 $M$ 个调整后的点提案坐标。
  - **置信度**：$\{\hat c_j\}_{j=1}^M$，来自步骤 2，表示每个预测点的置信度评分。
  - **匹配结果**：通过匈牙利算法得到的映射 $\xi: {1, \dots, N} \to {1, \dots, M}$，来自步骤 3，表示每个真实点 $p_i$ 匹配的预测点 $\hat{p}_{\xi(i)}$。
  - **真实点**：$\{p_i\}_{i=1}^N$，表示图像中 $N$ 个真实个体（例如，人头中心）的坐标。

- **回归损失：**

  - **仅对 $N$ 个正样本**（匹配的点对）计算平方欧氏距离（L2损失），优化预测点与真实点的坐标偏差： 
    $$
    L_{\mathrm{loc}}
      = \frac{1}{N}\sum_{i=1}^N \bigl\|\,p_i - \hat p_{\xi(i)}\bigr\|_2^2.
    $$

- **分类损失：**

  - 对**所有 $M$ 个预测点**进行二分类交叉熵损失计算，区分正样本（匹配的点）和负样本（未匹配的点）：
    $$
    \mathcal{L}_{\text{cls}} = -\frac{1}{M} \left[ \sum_{i=1}^N \log \hat{c}_{\xi(i)} + \lambda_1 \sum_{j \notin \{\xi(1), \dots, \xi(N)\}} \log (1 - \hat{c}_j) \right]
    $$
    其中：

    - 正样本（$i=1,\dots,N$）：目标置信度为 1，优化 $\log \hat{c}_{\xi(i)}$。
    - 负样本（$j \notin {\xi(1), \dots, \xi(N)}$）：目标置信度为 0，优化 $\log (1 - \hat{c}_j)$。
    - $\lambda_1 = 0.5$（PAGE6，Section 4.1），为负样本损失引入加权，平衡正负样本贡献。

  - 该损失确保正样本点具有高置信度，负样本点（背景）具有低置信度。

- **总损失：**

  - 结合回归损失和分类损失： $\mathcal{L} = \mathcal{L}_{\text{cls}} + \lambda_2 \mathcal{L}_{\text{loc}}$ 其中 $\lambda_2 = 2 \times 10^{-4}$（PAGE6，Section 4.1），平衡回归损失的贡献。

------

##### 步骤 5：推理与结果输出

**详细描述**：

推理阶段使用训练好的 P2PNet 模型在新图像上进行前向传播，直接生成高置信度的点预测，无需匹配或复杂后处理，输出人群计数和个体位置。

- 输入：

  - 测试图像 $I \in \mathbb{R}^{H \times W \times 3}$（例如，$1024 \times 768 \times 3$）。
- 前向传播：

  1. 生成点提案：

     - 同步骤 1，在图像上划分网格（步幅 $s=8$），每个网格单元生成 $K=4$ 个参考点（PAGE6，Section 4.1），得到点提案 ${p_i}$（例如，$49,152$ 个点）。
  2. 提取特征并预测：
  
     - 同步骤 2，通过 VGG-16 主干提取特征图 $\mathcal{F}_s$，然后通过回归分支预测偏移量 ${\Delta_{jx}^k, \Delta_{jy}^k}$ 和分类分支预测置信度 ${\hat{c}_j}$，生成调整后的预测点： $\hat{p}_j = (x_k + \gamma \Delta_{jx}^k, y_k + \gamma \Delta_{jy}^k), \quad \gamma = 100$ （PAGE5，Section 3.4 和 PAGE6，Section 4.1）。
  3. 置信度筛选：

     - 保留置信度高于阈值 $\tau = 0.5$ 的预测点（PAGE7，Section 4.2）： $\mathcal{P}_{\text{final}} = \{\hat{p}_j \mid \hat{c}_j > \tau\}$
- 输出：

  - 人群计数：

    - 高置信度点的数量： $\text{Count} = \left| \{\hat{c}_j > \tau\} \right|$ 表示预测的人群总数。
- 定位结果：
  
  - 高置信度点的坐标集合： $\mathcal{P}_{\text{final}} = \{\hat{p}_j \mid \hat{c}_j > \tau\}$ 表示每个个体的位置（例如，人头中心）。



## 3. 新的评价指标：nAP

**概述**：

**nAP**（density Normalized Average Precision，密度归一化平均精度）是一种综合评估人群计数和个体定位性能的指标，灵感来源于对象检测中的mAP（mean Average Precision）。nAP通过归一化距离阈值解决人群密度变化问题，评估预测点的定位精度和计数准确性。评估过程采用**贪心顺序匹配**，与训练阶段的匈牙利匹配不同，仅基于归一化欧氏距离判断真阳性（TP）和假阳性（FP）。

------

### 3.1 计算nAP

#### 步骤 1：准备输入数据

- 输入：
  - **预测点集合**：$   \hat{\mathcal{P}} = \{\hat{p}_j \mid j \in \{1, \ldots, M\}\}   $，每个预测点 $   \hat{p}_j = (\hat{x}_j, \hat{y}_j)   $ 表示模型预测的头部位置，附带一个置信度 $   \hat{c}_j \in [0, 1]   $。
  - **真实点集合**：$   \mathcal{P} = \{p_i \mid i \in \{1, \ldots, N\}\}   $，每个真实点 $   p_i = (x_i, y_i)   $ 表示标注的头部中心位置。

#### 步骤 2：按置信度排序预测点

- 将所有预测点 $   \hat{\mathcal{P}}   $ 按照置信度 $   \hat{c}_j   $ 从高到低排序，得到排序后的序列 $   \{\hat{p}_j, \hat{c}_j\}   $。
- **原因**：高置信度的预测点优先匹配，确保更可靠的预测先被评估（PAGE3，Section 3.2）。

#### 步骤 3：计算每个真实点的密度（kNN距离）

- 对于每个真实点 $p_i$  ，计算其 k最近邻距离$d_{\text{kNN}}(p_i) $：

  - 找到 $   p_i   $ 在真实点集合 $   \mathcal{P}   $ 中的 $   k   $ 个最近邻点（论文默认 $   k = 3   $，PAGE4，Figure 2）。

  - 计算 $p_i$ 到这 $k$个邻居的平均欧氏距离：
    $$
    d_{\text{kNN}}(p_i) = \frac{1}{k} \sum_{\text{top } k \text{ neighbors of } p_i} \|p_i - p_{\text{neighbor}}\|_2
    $$
    其中：

    - $   \|p_i - p_{\text{neighbor}}\|_2 = \sqrt{(x_i - x_{\text{neighbor}})^2 + (y_i - y_{\text{neighbor}})^2}   $。

- **作用**：$   d_{\text{kNN}}(p_i)   $ 反映局部人群密度，密集区域 $   d_{\text{kNN}}   $ 较小，稀疏区域较大，用于归一化距离阈值（PAGE3，Section 3.2）。

#### 步骤 4：贪心顺序匹配（判断TP/FP）

- 按照置信度从高到低，依次检查每个预测点$\hat{p}_j$：

  1. 找到最近的真实点：

     - 计算 $   \hat{p}_j   $ 到所有真实点 $   p_i   $ 的欧氏距离： $d(\hat{p}_j, p_i) = \|\hat{p}_j - p_i\|_2$
     - 选择距离最小的真实点 $   p_i   $。

  2. 检查匹配条件：

     - 如果 $   p_i   $ 已被之前的预测点（更高置信度）匹配，则 $   \hat{p}_j   $ 标记为 **假阳性（FP）**。

     - 如果 $   p_i   $ 未被匹配，计算归一化距离： $\text{归一化距离} = \frac{d(\hat{p}_j, p_i)}{d_{\text{kNN}}(p_i)}$

     - 比较归一化距离与阈值 $\delta $

       - 如果
         $$
         \frac{d(\hat{p}_j, p_i)}{d_{\text{kNN}}(p_i)} < \delta
         $$

         - $   \hat{p}_j   $ 标记为 **真阳性（TP）**。
         - 标记 $   p_i   $ 为已匹配，防止后续重复匹配。

       - 否则：

         - $   \hat{p}_j   $ 标记为 **假阳性（FP）**。

- 关键点：

  - 匹配是**贪心顺序匹配**（sequential association，PAGE3），按置信度顺序逐一检查，非匈牙利算法（匈牙利仅用于训练，PAGE5）。
  - 置信度 $   \hat{c}_j   $ 仅用于排序，不参与距离阈值判断。

#### 步骤 5：计算精度和召回率，绘制PR曲线

- 遍历所有预测点后，生成一个二进制序列：1表示TP，0表示FP。
- 计算累计的精度（Precision）和召回率（Recall）：
  - **Precision**： $\text{Precision} = \frac{\text{累积 TP 数量}}{\text{累积 TP 数量} + \text{累积 FP 数量}}$
  - **Recall**： $\text{Recall} = \frac{\text{累积 TP 数量}}{\text{真实点总数 } N}$
- 根据Precision和Recall绘制**Precision-Recall曲线**（PR曲线）。

#### 步骤 6：计算nAP

- nAP是PR曲线下方的面积（PAGE3，Section 3.2），表示在特定 $  \delta  $ 下的平均精度： $\text{nAP}_\delta = \int_0^1 \text{Precision}(\text{Recall}) \, d\text{Recall}$

#### 步骤 7：多阈值nAP

- 为评估不同定位精度的表现，计算多个 $\delta $值下的nAP（PAGE6，Section 4.2）：

  - $  \delta  $ 从0.05到0.50，步长0.05（共10个阈值：0.05, 0.10, ..., 0.50）。
  - 计算每个 $  \delta  $ 的 $  \text{nAP}_\delta  $。

- 综合指标：取所有 $  \text{nAP}_\delta  $ 的平均值： $\text{nAP}_{\{0.05:0.05:0.50\}} = \frac{1}{10} \sum_{\delta \in \{0.05, 0.10, \dots, 0.50\}} \text{nAP}_\delta$

- 典型阈值

  （PAGE7，Table 1）：

  - $  \text{nAP}_{0.5}  $: 宽松定位要求（允许偏差为 $   d_{\text{kNN}}/2   $），适合大多数应用。
  - $  \text{nAP}_{0.25}  $, $  \text{nAP}_{0.05}  $: 严格定位要求，测试高精度场景。





## 4. **实验结果：P2PNet表现如何？**

论文在几个数据集（比如 ShanghaiTech、UCF-QNRF、NWPU-Crowd）上测试了 P2PNet，结果非常好：

- **计数准确性**：
  - 在 ShanghaiTech PartA 数据集上，P2PNet 的 MAE（平均绝对误差）是 52.74，比之前最好的方法低了 4.8%（意味着人数预测更准）。
  - 在 NWPU-Crowd 数据集上，MAE 是 77.44，也比其他方法好。
- **定位准确性**：
  - 用 nAP 指标衡量，P2PNet 在大多数数据集上的 nAP（$\delta=0.5$）超过 80%，甚至接近 90%，说明定位很准。
  - 在 NWPU-Crowd 数据集上，P2PNet 的 F1 分数（综合定位指标）是 71.2%，比其他方法高。





## 5. **论文的贡献总结**

论文有三个主要贡献：

1. **新框架**：提出了一个“纯点框架”（purely point-based framework），直接用点来表示人，跳过了复杂的中间步骤（比如密度图或框）。
2. **新指标**：提出了 nAP，既看计数准不准，也看定位准不准。
3. **新方法**：设计了 P2PNet，通过一对一匹配直接预测点，效果比之前的方法好。



## 6. **论文的意义**

- **对研究者的意义**：P2PNet 提供了一个简单又高效的思路，证明了“直接预测点”在人群计数和定位任务中的可行性，可能会启发其他点预测任务（比如关键点检测）。
- **对实际应用的意义**：P2PNet 输出的点可以直接用于人群追踪、行为分析、安全监控等任务，非常实用。













